/*! jquery.palette 2016-12-06 */
$(function(){var a=$("#palette"),b=$("#lineWidth"),c=($("#palette>canvas")[0],$(window).height(),$(window).width(),$("<canvas>").attr({width:a.width(),height:a.height()})),d=$("<div>").addClass("mask");a.append(c,d);var e=c.get(0).getContext("2d"),f=0,g=0,h=0,i=0,j=!1,k=!1,l=!1,m=!1;e.lineCap="round",e.lineJoin="round",d.on("mousedown",function(a){j=!0,k=!1,f=h=a.offsetX,g=i=a.offsetY,console.log(a.offsetX,a.offsetY)}).on("mouseenter",function(a){m=!0,l=!1}).on("mouseleave",function(a){m=!1,l=!0}).on("mousemove",function(a){m&&j&&(e.beginPath(),e.moveTo(h,i),e.lineTo(a.offsetX,a.offsetY),e.stroke(),h=a.offsetX,i=a.offsetY)}),b.on("change",function(a){e.lineWidth=parseInt($(this).val())}).trigger("change"),$("input[name='fill_style']").on("change",function(a){var b=$("input[name='fill_style']:checked");b.parent("label").addClass("active").siblings("label").removeClass("active"),e.strokeStyle=e.fillStyle=b.val()}).trigger("change");var n=[e.getImageData(0,0,c.attr("width"),c.attr("height"))],o=1;$(document).on("mouseup",function(a){if(j){n=n.slice(0,o);var b=e.getImageData(0,0,c.attr("width"),c.attr("height"));n.push(b),o++,console.log(n)}j=!1,k=!0}),$("#prevHistory").on("click",function(a){o--,o<1&&(o=1),e.putImageData(n[o-1],0,0)}),$("#nextHistory").on("click",function(a){o++,o>n.length&&(o=n.length),e.putImageData(n[o-1],0,0)})});